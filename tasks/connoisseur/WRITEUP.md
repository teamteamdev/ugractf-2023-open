# Величайший ценитель: Write-up

Пресс-релиз рассказывает о конференции, на которой неназванный величайший типографический сноб всех времён и народов сделает доклад о том, какой крах ждёт современное общество, если в нём не начать наращивать шрифтовую грамотность и, в частности, способность распознавать шрифты.

Анонс написан шрифтом Helvetica — понять это можно, например, заслав скриншот части документа в большом масштабе на [whatfontis.com](https://www.whatfontis.com). Helvetica, по мнению многих ~~снобов~~, — непревзойдённая вершина шрифтового искусства, шрифт, не теряющий актуальность спустя более чем полвека после своего создания. Однако после пристального изучения документа можно понять, что что-то здесь всё-таки не так: примерно в середине текста увеличивается расстояние между строк, а если его увеличить, то видно, что одни и те же буквы выглядят по-разному. Особенно яркий контраст в слове titled:

![Различия в буквах](writeup/zoom.png)

Отличающиеся буквы написаны шрифтом Arial (понять это можно с помощью того же whatfontis.com, надёргав из середины текста букв, отличающихся от своих сородичей из крайних абзацев, и отправив их на распознавание отдельно).

> Arial изначально появился как шрифт-замена, который можно было бы использовать, если Helvetica отсутствует (например, по лицензионным причинам). Благодаря включению в Windows он распространился — и стал использоваться — гораздо шире, и это на фоне устоявшегося среди типографских ~~снобов~~ специалистов мнения, что он — всего лишь «ухудшенная Helvetica», не имеющая права на жизнь. Похожесть Helvetica и Arial служит предметом непрекращающихся шуток — например, надписи на [вот такой майке](https://www.amazon.com/Helvetica-Ariel-T-Shirt-Graphic-Designers/dp/B07LF4BKVR). При этом, конечно, далеко не все повторяющие это мнение люди способны сходу отличить эти шрифты друг от друга. Впрочем, остальные неспособны их _не отличать_, и ещё непонятно, кому жить труднее.

Попробуем выделить символы, шрифт которых — Arial.

Импортируем файл в Inkscape. Конечно же, никаких данных о шрифтах в нём не осталось: текст преобразован в кривые.

Напишем рядом небольшое количество текста шрифтом Arial размером 11pt (именно таков размер букв в исходном файле). Переместим надпись поверх оригинала, и будем их обозначать так: Arial — 1, Helvetica — 0. Пробелы будем пропускать.

![Наложение шрифтов](writeup/fontdiff.png)

Даже неразличимые при одиночном изучении буквы имеют различия, которые при наложении видны в виде несовпадающих участков. При этом стоит отличать их от совпадающих криволинейных участков букв, где из-за артефактов отрисовки и округлений при экспорте и импорте тоже кажется, что что-то торчит: истинно торчащие элементы при увеличении тоже увеличиваются, а артефакты остаются тоньше пикселя.

![Артефакты](writeup/diffzoom.png)

Будет получаться последовательность 01110101011001110111001001100001… — если эти биты преобразовать байты, а байты — в строку, начнёт получаться `ugra`. Чтобы выписывать было удобнее, можно выкрасить наложенный текст в белый:

![Анализ](writeup/analysis.png)

В какой-то момент на третьей строке второго абзаца буквы перестанут совпадать совсем: так мы поймём, что флаг закончился.

Флаг: **ugra_the_bartender_says_we_dont_serve_your_type_here_ugmrxrcgzb2brld3**
