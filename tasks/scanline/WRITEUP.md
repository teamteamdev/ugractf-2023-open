# В один проход: Write-up

Сканеры штрих-кодов — и название про сканирование — изображены на картинке неспроста.

Изучив картинку (например, при помощи stegsolve), замечаем, что что-то есть в альфа-канале — небольшая область посередине имеет прозрачность. Посмотрим, что будет, если всю картинку сделать чёрной, сделав белую подложку для того, чтобы прозрачность была виднее:

![Чёрная картинка](writeup/black.png)

Видим блоки 1×2 и 3×2, разделённые одинарными или тройными промежутками. Напоминает узкую полоску от штрих-кода. Чтобы смочь её сосканировать, высветлим все варианты серого до белого, инвертируем картинку и растянем нашу полоску по высоте:

![Чёрная картинка](writeup/code.png)

Распознаем код каким-нибудь сканером. Заменим большие буквы маленькими, а пробелы — подчёркиваниями.

Флаг: **ugra_one_more_of_these_as_compared_to_parrots_9benpuo6evg7xjt7**

## Постмортем

Стандарт Code39 позволяет добавить необязательный контрольный символ в конец данных штрих-кода. При этом штрих-код с контрольным символом неотличим от штрих-кода без контрольного символа, в котором последний символ данных случайно подходит в качестве контрольного. Поэтому использование или неиспользование контрольного символа — это настройка как генератора кодов, так и их считывателя, и она должна совпадать.

В задании дан штрих-код с контрольным символом; протестированные автором сканеры (в том числе один физический) контрольный символ пропускали. При этом некоторые другие сканеры включали символ в данные; чаще всего это оказывалась буква или цифра, и догадаться, что это может быть не часть флага, было очень сложно.

Поскольку столкновение или нестолкновение с этой проблемой определялось по сути везением (в выборе сканера и в генерации), несмотря на значительное количество решивших задание к тому моменту, про это была дана подсказка.
